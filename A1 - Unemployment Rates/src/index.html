<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<script src="https://d3js.org/d3.v6.min.js"></script>
	<title>CPSC 583 - Assignment 1</title>
</head>

<body>
	<h1 style="font-family: monospace">Unemployment Rates from 1995-2004</h1>
	
	<h2 style="font-family: monospace">Percentage of Unemployed Native Men</h2>
	<svg id="native-men"></svg>
	
	<h2 style="font-family: monospace">Foreign-Born Men</h2>
	<svg id="foreign-born-men"></svg>
	
	<h2 style="font-family: monospace">Native Women</h2>
	<svg id="native-women"></svg>
	
	<h2 style="font-family: monospace">Foriegn-born Women</h2>
	<svg id="foreign-born-women"></svg>
</body>

<script>
	
	var w = 1100;
	var h = 300;
	var chartX = [100, 600, 900, 1000];	// X coordinate for 1995, 2000, 2003, 2004
	
	// Chart SVGs
	var nm = d3.select("#native-men").attr("width", w).attr("height", h);
	var fbm = d3.select("#foreign-born-men").attr("width", w).attr("height", h);
	var nw = d3.select("#native-women").attr("width", w).attr("height", h);
	var fbw = d3.select("#foreign-born-women").attr("width", w).attr("height", h);
	
	// Chart axes
	nm.append("text")
		.attr("x", 0).attr("y", 12)
		.text("30%").attr("font-family", "monospace");
	nm.append("text")
		.attr("x", 0).attr("y", h-20)
		.text("0%").attr("font-family", "monospace");
	nm.append("text")
		.attr("x", chartX[0]).attr("y", h)
		.text("1995").attr("font-family", "monospace");
	nm.append("text")
		.attr("x", chartX[1]).attr("y", h)
		.text("2000").attr("font-family", "monospace");
	nm.append("text")
		.attr("x", chartX[2]).attr("y", h)
		.text("2003").attr("font-family", "monospace");
	nm.append("text")
		.attr("x", chartX[3]).attr("y", h)
		.text("2004").attr("font-family", "monospace");
	nm.append("line")
		.attr("x1", 30).attr("y1", 0)
		.attr("x2", 30).attr("y2", h-20)
		.attr("stroke", "black");
	nm.append("line")
		.attr("x1", 30).attr("y1", h-20)
		.attr("x2", w).attr("y2", h-20)
		.attr("stroke", "black");
	
	
	fbm.append("text")
		.attr("x", 0).attr("y", 12)
		.text("30%").attr("font-family", "monospace");
	fbm.append("text")
		.attr("x", 0).attr("y", h-20)
		.text("0%").attr("font-family", "monospace");
	fbm.append("text")
		.attr("x", chartX[0]).attr("y", h)
		.text("1995").attr("font-family", "monospace");
	fbm.append("text")
		.attr("x", chartX[1]).attr("y", h)
		.text("2000").attr("font-family", "monospace");
	fbm.append("text")
		.attr("x", chartX[2]).attr("y", h)
		.text("2003").attr("font-family", "monospace");
	fbm.append("text")
		.attr("x", chartX[3]).attr("y", h)
		.text("2004").attr("font-family", "monospace");
	fbm.append("line")
		.attr("x1", 30).attr("y1", 0)
		.attr("x2", 30).attr("y2", h-20)
		.attr("stroke", "black");
	fbm.append("line")
		.attr("x1", 30).attr("y1", h-20)
		.attr("x2", w).attr("y2", h-20)
		.attr("stroke", "black");
	
	
	
	nw.append("text")
		.attr("x", 0).attr("y", 12)
		.text("30%").attr("font-family", "monospace");
	nw.append("text")
		.attr("x", 0).attr("y", h-20)
		.text("0%").attr("font-family", "monospace");
	nw.append("text")
		.attr("x", chartX[0]).attr("y", h)
		.text("1995").attr("font-family", "monospace");
	nw.append("text")
		.attr("x", chartX[1]).attr("y", h)
		.text("2000").attr("font-family", "monospace");
	nw.append("text")
		.attr("x", chartX[2]).attr("y", h)
		.text("2003").attr("font-family", "monospace");
	nw.append("text")
		.attr("x", chartX[3]).attr("y", h)
		.text("2004").attr("font-family", "monospace");
	nw.append("line")
		.attr("x1", 30).attr("y1", 0)
		.attr("x2", 30).attr("y2", h-20)
		.attr("stroke", "black");
	nw.append("line")
		.attr("x1", 30).attr("y1", h-20)
		.attr("x2", w).attr("y2", h-20)
		.attr("stroke", "black");
	
	
	fbw.append("text")
		.attr("x", 0).attr("y", 12)
		.text("30%").attr("font-family", "monospace");
	fbw.append("text")
		.attr("x", 0).attr("y", h-20)
		.text("0%").attr("font-family", "monospace");
	fbw.append("text")
		.attr("x", chartX[0]).attr("y", h)
		.text("1995").attr("font-family", "monospace");
	fbw.append("text")
		.attr("x", chartX[1]).attr("y", h)
		.text("2000").attr("font-family", "monospace");
	fbw.append("text")
		.attr("x", chartX[2]).attr("y", h)
		.text("2003").attr("font-family", "monospace");
	fbw.append("text")
		.attr("x", chartX[3]).attr("y", h)
		.text("2004").attr("font-family", "monospace");
	fbw.append("line")
		.attr("x1", 30).attr("y1", 0)
		.attr("x2", 30).attr("y2", h-20)
		.attr("stroke", "black");
	fbw.append("line")
		.attr("x1", 30).attr("y1", h-20)
		.attr("x2", w).attr("y2", h-20)
		.attr("stroke", "black");
	
	
	
	// Open CSV file and draw charts
	d3.text("unemployment.csv").then(function(text){
		var rows = d3.csvParseRows(text);
		
		// Loop through all data
		for(var i = 5; i < 17; i++){
			for(var x = 1; x < 4; x++){	// Four years; 1995, 2000, 2003, 2004
				
				// Native Men chart
				if(rows[i][1+x] != ".." && rows[i][1+x-1] != ".."){
					nm.append("line")
						.attr("x1", chartX[x-1])
						.attr("y1", (h-20)-(rows[i][1+x-1]*10))
						.attr("x2", chartX[x])
						.attr("y2", (h-20)-(rows[i][1+x]*10))
						.attr("stroke", "#0000FF");
				}
				
				// Foreign-born Men chart
				if(rows[i][5+x] != ".." && rows[i][5+x-1] != ".."){
					fbm.append("line")
						.attr("x1", chartX[x-1])
						.attr("y1", (h-20)-(rows[i][5+x-1]*10))
						.attr("x2", chartX[x])
						.attr("y2", (h-20)-(rows[i][5+x]*10))
						.attr("stroke", "#00B3FF");		
				}
				
				// Native Women chart
				if(rows[i][9+x] != ".." && rows[i][9+x-1] != ".."){
					nw.append("line")
						.attr("x1", chartX[x-1])
						.attr("y1", (h-20)-(rows[i][9+x-1]*10))
						.attr("x2", chartX[x])
						.attr("y2", (h-20)-(rows[i][9+x]*10))
						.attr("stroke", "#FF0000");	
				}
				
				// Foreign-born Women chart
				if(rows[i][13+x] != ".." && rows[i][13+x-1] != ".."){
					fbw.append("line")
						.attr("x1", chartX[x-1])
						.attr("y1", (h-20)-(rows[i][13+x-1]*10))
						.attr("x2", chartX[x])
						.attr("y2", (h-20)-(rows[i][13+x]*10))
						.attr("stroke", "#F7778F");		
				}
				
			}
		}
		
	});
	
	
</script>
</html>